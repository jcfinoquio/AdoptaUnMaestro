<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registro - Adopta un Maestro</title>
  <link rel="stylesheet" href="./css/style.css" />

  <script defer>
    document.addEventListener('DOMContentLoaded', () => {
      const rolSelect = document.getElementById('rol');
      const bloqueMaestro = document.getElementById('bloqueMaestro');
      const bloqueCentro = document.getElementById('bloqueCentro');
      const formacionesCont = document.getElementById('formacionesContenedor');
      const btnAddForm = document.getElementById('btnAddForm');
      const form = document.getElementById('registroForm');

      function mostrarBloque(rol) {
        bloqueMaestro.classList.toggle('hidden', rol !== 'maestro');
        bloqueCentro.classList.toggle('hidden', rol !== 'centro');
      }

      rolSelect.addEventListener('change', (e) => mostrarBloque(e.target.value));

      let formCount = 0;
      btnAddForm?.addEventListener('click', () => {
        formCount++;
        const idx = formCount;
        const wrapper = document.createElement('div');
        wrapper.className = 'formation-block';
        wrapper.innerHTML = `
          <div class="form-row">
            <div class="form-group">
              <label>Título</label>
              <input name="formacion[${idx}][titulo]" type="text" placeholder="Título (Ej: Máster en Educación)" />
            </div>
            <div class="form-group">
              <label>Centro formador</label>
              <input name="formacion[${idx}][centroFormador]" type="text" placeholder="Centro formador" />
            </div>
            <div class="form-group">
              <label>Año fin</label>
              <input name="formacion[${idx}][anioFin]" type="number" min="1900" max="2100" />
            </div>
            <div class="form-group">
              <label>Tipo</label>
              <input name="formacion[${idx}][tipoFormacion]" type="text" placeholder="Tipo (FP, Grado...)" />
            </div>
          </div>
          <div style="text-align:right;margin-top:8px;">
            <button type="button" class="btn btn-outline" onclick="this.closest('.formation-block').remove()">Eliminar</button>
          </div>`;
        formacionesCont.appendChild(wrapper);
      });

      form.addEventListener('submit', (e) => {
        if (!form.checkValidity()) {
          e.preventDefault();
          form.reportValidity();
        }
      });
    });
  </script>

  <style>
    /* ==== Ajuste de layout centrado sin sidebar ==== */
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: linear-gradient(180deg, #eaf7f0 0%, #dff4eb 100%);
      font-family: "Poppins", sans-serif;
      min-height: 100vh;
      margin: 0;
    }

    header.header-nav {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 8%;
      background: rgba(255,255,255,0.6);
      backdrop-filter: blur(8px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      position: fixed;
      top: 0;
      z-index: 1000;
    }

    .logo {
      height: 50px;
      border-radius: 8px;
    }

    .nav-links {
      display: flex;
      gap: 24px;
    }

    .nav-links a {
      text-decoration: none;
      color: #094032;
      font-weight: 600;
      transition: color 0.2s ease;
    }

    .nav-links a:hover {
      color: #009e70;
    }

    main.register-main {
      margin-top: 120px;
      width: 100%;
      display: flex;
      justify-content: center;
      padding: 0 20px;
    }

    .register-box {
      background: rgba(255,255,255,0.85);
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      padding: 40px;
      max-width: 900px;
      width: 100%;
    }

    .register-box h2 {
      text-align: center;
      margin-bottom: 10px;
      color: #094032;
    }

    .form-row {
      display: flex;
      gap: 16px;
      margin-bottom: 14px;
      flex-wrap: wrap;
    }

    .form-group {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      font-weight: 600;
      margin-bottom: 6px;
      color: #0b4233;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      border: 1px solid #b8d1c7;
      border-radius: 8px;
      padding: 8px 10px;
      background: #fff;
      font-family: inherit;
    }

    .btn-row {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      margin-top: 20px;
    }

    .btn {
      border: none;
      padding: 10px 18px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.2s ease;
    }

    .btn-primary {
      background: #009e70;
      color: white;
    }

    .btn-primary:hover {
      background: #007b57;
    }

    .btn-outline {
      background: transparent;
      border: 1px solid #009e70;
      color: #009e70;
    }

    .btn-outline:hover {
      background: #009e70;
      color: #fff;
    }

    .hidden { display: none; }

    .formation-block {
      border: 1px dashed #b8d1c7;
      background: rgba(255,255,255,0.7);
      border-radius: 10px;
      padding: 16px;
      margin-bottom: 12px;
    }
  </style>
</head>

<body>
  <!-- Cabecera -->
  <header class="header-nav">
    <div class="logo-container">
      <img src="./img/logo.jpeg" alt="Logo del sitio Adopta un Maestro" class="logo">
    </div>
    <nav class="nav-links">
      <a href="./index.html">INICIO</a>
      <a href="./registro.html">REGISTRO</a>
      <a href="#">SOBRE NOSOTROS</a>
      <a href="#">CONTACTO</a>
    </nav>
  </header>

  <!-- Contenido principal -->
  <main class="register-main">
    <section class="register-box">
      <h2>Crear cuenta - Adopta un Maestro</h2>
      <p style="text-align:center; color:#094032; margin-bottom:24px;">
        Regístrate como maestro o como centro educativo
      </p>

      <form id="registroForm" novalidate>
        <!-- Datos Usuario -->
        <div class="form-row">
          <div class="form-group">
            <label for="email">Correo electrónico *</label>
            <input id="email" name="email" type="email" required placeholder="tu@email.com" />
          </div>
          <div class="form-group">
            <label for="telefono">Teléfono</label>
            <input id="telefono" name="telefono" type="text" placeholder="600 123 456" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="password">Contraseña * (min. 6)</label>
            <input id="password" name="password" type="password" minlength="6" required />
          </div>
          <div class="form-group">
            <label for="rol">Registro como *</label>
            <select id="rol" name="rol" required>
              <option value="">Selecciona...</option>
              <option value="maestro">Maestro</option>
              <option value="centro">Centro</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="avatar">Avatar</label>
            <input id="avatar" name="avatar" type="file" accept="image/*" />
          </div>
        </div>

        <!-- Bloque Maestro -->
        <section id="bloqueMaestro" class="hidden">
          <hr />
          <h3>Datos del Maestro</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="nombre">Nombre *</label>
              <input id="nombre" name="nombre" type="text" />
            </div>
            <div class="form-group">
              <label for="apellidos">Apellidos *</label>
              <input id="apellidos" name="apellidos" type="text" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="especialidad">Especialidad</label>
              <input id="especialidad" name="especialidad" type="text" placeholder="Ej: Primaria, Inglés..." />
            </div>
            <div class="form-group">
              <label for="aniosExperiencia">Años experiencia</label>
              <input id="aniosExperiencia" name="aniosExperiencia" type="number" min="0" />
            </div>
          </div>
          <div class="form-group">
            <label for="biografia">Biografía</label>
            <textarea id="biografia" name="biografia" rows="4" placeholder="Escribe una breve bio..."></textarea>
          </div>

          <div id="formacionesContenedor"></div>
          <button type="button" id="btnAddForm" class="btn btn-outline">+ Añadir formación</button>
        </section>

        <!-- Bloque Centro -->
        <section id="bloqueCentro" class="hidden">
          <hr />
          <h3>Datos del Centro</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="nombreCentro">Nombre del Centro *</label>
              <input id="nombreCentro" name="nombreCentro" type="text" />
            </div>
            <div class="form-group">
              <label for="direccion">Dirección</label>
              <input id="direccion" name="direccion" type="text" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="sitioWeb">Sitio web</label>
              <input id="sitioWeb" name="sitioWeb" type="url" placeholder="https://www.ejemplo.com" />
            </div>
          </div>
        </section>

        <div class="btn-row">
          <button type="button" class="btn btn-outline" onclick="location.href='index.html'">Cancelar</button>
          <button class="btn btn-primary" type="submit">Crear cuenta</button>
        </div>
      </form>
    </section>
  </main>
</body>
</html>
