// @ts-nocheck
document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("login-form"),t=document.getElementById("mensaje"),n=document.getElementById("mail"),o=document.getElementById("password"),d=document.getElementById("login-overlay");document.getElementById("cerrar-modal");function a(){d.classList.remove("active"),document.body.classList.remove("modal-overlay"),t.textContent="",e.reset()}document.getElementById("abrir-modal")?.addEventListener("click",(function(){d.classList.add("active"),document.body.classList.add("modal-active")})),document.getElementById("cerrar-modal")?.addEventListener("click",(function(){a()})),d?.addEventListener("click",(function(e){e.target===this&&a()})),e?.addEventListener("submit",(e=>{e.preventDefault();const d=n?.value.trim()||"",l=o?.value||"";return d?(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(d)?l?(t.textContent="Iniciando sesión...",t.style.color="blue",void setTimeout((()=>{"usuario@ejemplo.com"===d&&"123456"===l?(t.textContent="¡Login exitoso! ✅",t.style.color="green",setTimeout((()=>{a(),alert("Bienvenido!")}),1e3)):(t.textContent="Credenciales incorrectas. Inténtalo de nuevo.",t.style.color="red")}),1500)):(t.textContent="Por favor, introduce tu contraseña.",void(t.style.color="red")):(t.textContent="El formato del correo electrónico no es válido.",void(t.style.color="red")):(t.textContent="Por favor, introduce tu correo electrónico.",void(t.style.color="red"))})),document.querySelectorAll(".btn-primary").forEach((e=>{"Postularme"===e.textContent&&e.addEventListener("click",(function(){alert("¡Postulación enviada correctamente!"),this.textContent="Postulado",this.classList.remove("btn-primary"),this.classList.add("btn-success"),this.disabled=!0}))}));document.querySelectorAll("[id^='visitas-']").forEach((e=>{const t=e.id;let n=parseInt(localStorage.getItem(t))||0;n++,localStorage.setItem(t,n),e.textContent=n}));document.querySelectorAll("[id^='contador-likes']").forEach((e=>{const t=e.id.replace("contador-likes",""),n=document.getElementById(`numero-likes${t}`),o=`likes-count${t}`,d=`user-liked${t}`;let a=parseInt(localStorage.getItem(o))||0;n&&(n.textContent=a),"true"===sessionStorage.getItem(d)&&(e.classList.add("clicado"),e.disabled=!0),e.addEventListener("click",(()=>{sessionStorage.getItem(d)||(a++,n.textContent=a,localStorage.setItem(o,a),e.classList.add("clicado"),e.disabled=!0,sessionStorage.setItem(d,"true"))}))}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("rol"),t=document.getElementById("bloqueMaestro"),n=document.getElementById("bloqueCentro"),o=document.getElementById("formacionesContenedor"),d=document.getElementById("btnAddForm"),a=document.getElementById("registroForm");function l(e){"maestro"===e?(t.classList.remove("hidden"),n.classList.add("hidden")):"centro"===e?(n.classList.remove("hidden"),t.classList.add("hidden")):(t.classList.add("hidden"),n.classList.add("hidden"))}e.addEventListener("change",(e=>l(e.target.value)));let r=0;d.addEventListener("click",(function(){r++;const e=r,t=document.createElement("div");t.className="formation-block",t.dataset.index=e,t.innerHTML=`\n          <div style="display:flex;gap:8px;flex-wrap:wrap;">\n            <div style="flex:1 1 45%;">\n              <label>Título</label>\n              <input name="formacion[${e}][titulo]" type="text" placeholder="Título (Ej: Máster en Educación)" />\n            </div>\n            <div style="flex:1 1 45%;">\n              <label>Centro formador</label>\n              <input name="formacion[${e}][centroFormador]" type="text" placeholder="Centro formador" />\n            </div>\n            <div style="flex:1 1 30%;">\n              <label>Año fin</label>\n              <input name="formacion[${e}][anioFin]" type="number" min="1900" max="2100" />\n            </div>\n            <div style="flex:1 1 30%;">\n              <label>Tipo</label>\n              <input name="formacion[${e}][tipoFormacion]" type="text" placeholder="Tipo (FP, Grado...)" />\n            </div>\n          </div>\n          <div style="text-align:right;margin-top:8px;">\n            <button type="button" class="btn-cancel" data-remove="${e}">Eliminar</button>\n          </div>\n        `,o.appendChild(t),t.querySelector("[data-remove]").addEventListener("click",(()=>t.remove()))})),a.addEventListener("submit",(t=>{if(!a.checkValidity())return t.preventDefault(),void a.reportValidity();const n=e.value;if(""===n)return t.preventDefault(),void alert("Selecciona tu rol (Maestro o Centro).");if("maestro"===n){const e=document.getElementById("nombre").value.trim(),n=document.getElementById("apellidos").value.trim();if(!e||!n)return t.preventDefault(),void alert("Para registrarte como Maestro, indica nombre y apellidos.")}})),l(e.value)}));