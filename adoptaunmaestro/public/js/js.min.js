// @ts-nocheck
document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("login-form");if(e){const l=document.getElementById("mensaje"),m=document.getElementById("mail"),u=document.getElementById("password"),p=document.getElementById("login-overlay"),g=(document.getElementById("cerrar-modal"),e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e));function t(){p.classList.remove("active"),document.body.classList.remove("modal-active"),l.textContent="",e.reset()}document.getElementById("abrir-modal")?.addEventListener("click",(function(){p.classList.add("active"),document.body.classList.add("modal-active")})),document.getElementById("cerrar-modal")?.addEventListener("click",(function(){t()})),p?.addEventListener("click",(function(e){e.target===this&&t()})),e.addEventListener("submit",(e=>{e.preventDefault();const o=m?.value.trim()||"",a=u?.value||"";return o?g(o)?a?(l.textContent="Iniciando sesión...",l.style.color="blue",void setTimeout((()=>{"usuario@ejemplo.com"===o&&"123456"===a?(l.textContent="¡Login exitoso! ✅",l.style.color="green",setTimeout((()=>{t(),alert("Bienvenido!")}),1e3)):(l.textContent="Credenciales incorrectas. Inténtalo de nuevo.",l.style.color="red")}),1500)):(l.textContent="Por favor, introduce tu contraseña.",void(l.style.color="red")):(l.textContent="El formato del correo electrónico no es válido.",void(l.style.color="red")):(l.textContent="Por favor, introduce tu correo electrónico.",void(l.style.color="red"))}))}window.toggleExpand=function(e){const t=e.closest(".job-offer");t&&(t.classList.toggle("expanded"),e.textContent=t.classList.contains("expanded")?"Leer menos":"Leer más")};const o=document.querySelectorAll(".read-more-btn");o.length>0&&(o.forEach((e=>{e.addEventListener("click",(function(){window.toggleExpand(this)}))})),document.querySelectorAll(".btn-primary").forEach((e=>{"Postularme"===e.textContent&&e.addEventListener("click",(function(){alert("¡Postulación enviada correctamente!"),this.textContent="Postulado",this.classList.remove("btn-primary"),this.classList.add("btn-success"),this.disabled=!0}))})));document.querySelectorAll("[id^='visitas-']").forEach((e=>{const t=e.id;let o=parseInt(localStorage.getItem(t))||0;o++,localStorage.setItem(t,o),e.textContent=o}));document.querySelectorAll("[id^='contador-likes']").forEach((e=>{const t=e.id.replace("contador-likes",""),o=document.getElementById(`numero-likes${t}`);if(!o)return;const a=`likes-count${t}`,n=`user-liked${t}`;let i=parseInt(localStorage.getItem(a))||0;o.textContent=i,"true"===sessionStorage.getItem(n)&&(e.classList.add("clicado"),e.disabled=!0),e.addEventListener("click",(()=>{sessionStorage.getItem(n)||(i++,o.textContent=i,localStorage.setItem(a,i),e.classList.add("clicado"),e.disabled=!0,sessionStorage.setItem(n,"true"))}))}));const a=document.getElementById("registroForm");if(a){const v=document.getElementById("rol"),f=document.getElementById("bloqueMaestro"),b=document.getElementById("bloqueCentro"),h=document.getElementById("formacionesContenedor"),y=document.getElementById("btnAddForm");function n(e){f&&f.classList.toggle("hidden","maestro"!==e),b&&b.classList.toggle("hidden","centro"!==e)}v&&v.addEventListener("change",(e=>n(e.target.value)));let E=0;y&&h&&y.addEventListener("click",(()=>{E++;const e=E,t=document.createElement("div");t.className="formation-block",t.innerHTML=`\n          <div style="display:flex;gap:8px;flex-wrap:wrap;">\n            <div style="flex:1 1 45%;">\n              <label>Título</label>\n              <input name="formacion[${e}][titulo]" type="text" placeholder="Título (Ej: Máster en Educación)" />\n            </div>\n            <div style="flex:1 1 45%;">\n              <label>Centro formador</label>\n              <input name="formacion[${e}][centroFormador]" type="text" placeholder="Centro formador" />\n            </div>\n            <div style="flex:1 1 30%;">\n              <label>Año fin</label>\n              <input name="formacion[${e}][anioFin]" type="number" min="1900" max="2100" />\n            </div>\n            <div style="flex:1 1 30%;">\n              <label>Tipo</label>\n              <input name="formacion[${e}][tipoFormacion]" type="text" placeholder="Tipo (FP, Grado...)" />\n            </div>\n          </div>\n          <div style="text-align:right;margin-top:8px;">\n            <button type="button" class="btn-cancel" onclick="this.closest('.formation-block').remove()">Eliminar</button>\n          </div>\n        `,h.appendChild(t)})),a.addEventListener("submit",(e=>{a.checkValidity()||(e.preventDefault(),a.reportValidity())})),v&&n(v.value)}const i=document.getElementById("resultados");if(i){const L=[{id:1,nombre:"Colegio San José",provincia:"Sevilla",tipo:"Concertado",ciudad:"Sevilla",telefono:"955 123 456",logo:"https://images.unsplash.com/photo-1562774053-701939374585?w=400&h=300&fit=crop",resumen:"Centro con enfoque STEM y apoyo a la inclusión."},{id:2,nombre:"Escuela La Marina",provincia:"Málaga",tipo:"Concertado",ciudad:"Málaga",telefono:"952 234 567",logo:"https://images.unsplash.com/photo-1588072432836-e10032774350?w=400&h=300&fit=crop",resumen:"Fuerte programa de idiomas y actividades náuticas."},{id:3,nombre:"Colegio Las Acacias",provincia:"Cádiz",tipo:"Privado",ciudad:"Cádiz",telefono:"956 345 678",logo:"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=400&h=300&fit=crop",resumen:"Proyecto artístico y cultural consolidado."},{id:4,nombre:"Centro Virgen del Alba",provincia:"Granada",tipo:"Concertado",ciudad:"Granada",telefono:"958 456 789",logo:"https://images.unsplash.com/photo-1546410531-bb4caa6b424d?w=400&h=300&fit=crop",resumen:"Metodologías activas en primaria."},{id:5,nombre:"Colegio Horizonte",provincia:"Córdoba",tipo:"Público",ciudad:"Córdoba",telefono:"957 567 890",logo:"https://images.unsplash.com/photo-1519452635265-7b1fbfd1e4e0?w=400&h=300&fit=crop",resumen:"Enfoque en mejora continua y convivencia."},{id:6,nombre:"Colegio Andalucía",provincia:"Jaén",tipo:"Concertado",ciudad:"Jaén",telefono:"953 678 901",logo:"https://images.unsplash.com/photo-1498243691581-b145c3f54a5a?w=400&h=300&fit=crop",resumen:"Programa de inclusión y proyectos rurales."},{id:7,nombre:"Escuela Nueva Ola",provincia:"Huelva",tipo:"Privado",ciudad:"Huelva",telefono:"959 789 012",logo:"https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=400&h=300&fit=crop",resumen:"Talleres tecnológicos y deportivos."},{id:8,nombre:"Colegio Alborán",provincia:"Almería",tipo:"Concertado",ciudad:"Almería",telefono:"950 890 123",logo:"https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=400&h=300&fit=crop",resumen:"Apuesta por la naturaleza y huertos escolares."},{id:9,nombre:"Colegio Río Verde",provincia:"Sevilla",tipo:"Público",ciudad:"Dos Hermanas",telefono:"955 901 234",logo:"https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=400&h=300&fit=crop",resumen:"Proyectos STEAM desde infantil."},{id:10,nombre:"Colegio Mediterráneo",provincia:"Málaga",tipo:"Concertado",ciudad:"Fuengirola",telefono:"952 012 345",logo:"https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=400&h=300&fit=crop",resumen:"Programas bilingües y actividades marinas."}],I=15;let C={q:"",provincia:"",tipo:"",page:1};const B=document.getElementById("buscar"),x=document.getElementById("filtroProvincia"),$=document.getElementById("filtroTipo"),k=document.getElementById("btnLimpiar"),w=document.getElementById("prevPage"),M=document.getElementById("nextPage"),P=document.getElementById("pageInfo"),A=document.getElementById("modalOverlay"),T=document.getElementById("modalCloseBtn"),S=document.getElementById("modalTitle"),q=document.getElementById("modalLogo"),F=document.getElementById("modalProvinciaTipo"),z=document.getElementById("modalCiudad"),j=document.getElementById("modalDescripcion"),H=document.getElementById("modalTelefono"),N=document.getElementById("modalContactBtn"),V=document.getElementById("modalGoPerfil");let D=null;function s(){i.setAttribute("aria-busy","true");const e=function(){const e=C.q.toLowerCase().trim();return L.filter((t=>(t.nombre+" "+t.ciudad+" "+t.resumen+" "+t.provincia).toLowerCase().includes(e)&&(!C.provincia||t.provincia===C.provincia)&&(!C.tipo||t.tipo===C.tipo)))}(),t=Math.max(1,Math.ceil(e.length/I));C.page=Math.min(C.page,t);const o=(C.page-1)*I,a=e.slice(o,o+I);i.innerHTML=a.map((e=>`\n        <article class="colegio-card" role="article" aria-labelledby="colegio-${e.id}">\n          <div class="colegio-logo" style="background-image:url('${e.logo}')" role="img" aria-label="${e.nombre} logo"></div>\n          <div class="colegio-meta">\n            <h4 id="colegio-${e.id}">${e.nombre}</h4>\n            <p><strong>${e.ciudad}</strong> · ${e.provincia}</p>\n            <p>${e.resumen}</p>\n            <div class="colegio-badges"><span class="badge">${e.tipo}</span></div>\n          </div>\n          <div class="colegio-actions">\n            <button class="btn-outline btn-view" data-id="${e.id}" aria-label="Ver ficha de ${e.nombre}">Ver ficha</button>\n            <button class="btn-primary" data-contact="${e.id}">Contactar centro</button>\n          </div>\n        </article>\n      `)).join(""),P&&(P.textContent=`${C.page} / ${t}`),w&&(w.disabled=C.page<=1),M&&(M.disabled=C.page>=t),i.setAttribute("aria-busy","false")}function d(){A&&(A.classList.remove("open"),A.setAttribute("aria-hidden","true")),D&&"function"==typeof D.focus&&D.focus()}A&&A.addEventListener("click",(e=>{e.target===A&&d()})),T&&T.addEventListener("click",d),document.addEventListener("keydown",(e=>{"Escape"===e.key&&A&&A.classList.contains("open")&&d()})),B&&B.addEventListener("input",(e=>{C.q=e.target.value,C.page=1,s()})),x&&x.addEventListener("change",(e=>{C.provincia=e.target.value,C.page=1,s()})),$&&$.addEventListener("change",(e=>{C.tipo=e.target.value,C.page=1,s()})),k&&k.addEventListener("click",(()=>{B&&(B.value=""),x&&(x.value=""),$&&($.value=""),C.q="",C.provincia="",C.tipo="",C.page=1,s()})),w&&w.addEventListener("click",(()=>{C.page>1&&(C.page--,s())})),M&&M.addEventListener("click",(()=>{C.page++,s()})),i.addEventListener("click",(e=>{if(e.target.classList.contains("btn-view")){!function(e,t){const o=L.find((t=>t.id===e));o&&(D=t||document.activeElement,S.textContent=o.nombre,q.style.backgroundImage=`url('${o.logo}')`,F.textContent=`${o.tipo} · ${o.provincia}`,z.textContent=`Ciudad: ${o.ciudad}`,j.textContent=o.resumen,H.textContent=`Teléfono: ${o.telefono}`,V&&(V.href=`./detalle-colegio.html?id=${o.id}`),N&&(N.onclick=()=>alert(`Solicitud de contacto enviada a ${o.nombre}. Tel: ${o.telefono}`)),A&&(A.classList.add("open"),A.setAttribute("aria-hidden","false")))}(Number(e.target.dataset.id),e.target)}const t=e.target.closest("[data-contact]");if(t){const e=Number(t.dataset.contact),o=L.find((t=>t.id===e));o&&alert(`Solicitud de contacto enviada a ${o.nombre}. Teléfono: ${o.telefono}`)}})),s()}const r=document.getElementById("maestrosResultados");if(r){const G=[{id:1,nombre:"María López",especialidad:"Primaria",anios:6,avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=200&h=200&fit=crop&crop=face",resumen:"Maestra con experiencia en metodologías activas y aprendizaje cooperativo."},{id:2,nombre:"Carlos Ruiz",especialidad:"Inglés",anios:8,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=200&h=200&fit=crop&crop=face",resumen:"Profesor B2 certificado, experiencia en infantil y primaria."},{id:3,nombre:"Ana Pérez",especialidad:"Matemáticas",anios:4,avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=200&h=200&fit=crop&crop=face",resumen:"Apasionada por el razonamiento lógico y creativo en matemáticas."},{id:4,nombre:"Javier Gómez",especialidad:"Educación Física",anios:12,avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&h=200&fit=crop&crop=face",resumen:"Entrenador y profesor con enfoque inclusivo y saludable."},{id:5,nombre:"Lucía Martín",especialidad:"Inglés",anios:3,avatar:"https://images.unsplash.com/photo-1534751516642-a1af1ef26a56?w=200&h=200&fit=crop&crop=face",resumen:"Formación en TEFL y experiencia internacional en UK."}],R=15;let J={q:"",especialidad:"",page:1};const O=document.getElementById("maestrosBuscar"),K=document.getElementById("filtroEspecialidad"),U=document.getElementById("btnMaestrosLimpiar"),Q=document.getElementById("maestrosPrevPage"),W=document.getElementById("maestrosNextPage"),X=document.getElementById("maestrosPageInfo"),Y=(document.getElementById("maestrosResultsInfo"),document.getElementById("maestrosResultsCount"));function c(){r.setAttribute("aria-busy","true");const e=function(){const e=J.q.toLowerCase().trim();return G.filter((t=>(t.nombre+" "+t.especialidad+" "+t.resumen).toLowerCase().includes(e)&&(!J.especialidad||t.especialidad===J.especialidad)))}(),t=Math.max(1,Math.ceil(e.length/R));J.page=Math.min(J.page,t);const o=(J.page-1)*R,a=e.slice(o,o+R);Y&&(Y.textContent=e.length),0===a.length?r.innerHTML='\n                <div class="maestros-empty-state" style="grid-column: 1 / -1;">\n                    <h3>No se encontraron maestros</h3>\n                    <p>Intenta ajustar tus filtros de búsqueda</p>\n                    <button class="btn-maestros-outline" onclick="document.getElementById(\'btnMaestrosLimpiar\')?.click()">Limpiar filtros</button>\n                </div>\n            ':r.innerHTML=a.map((e=>`\n                <article class="maestro-card" role="article" aria-labelledby="maestro-${e.id}">\n                    <div class="maestro-avatar" style="background-image:url('${e.avatar}')" role="img" aria-label="${e.nombre}"></div>\n                    <div class="maestro-meta">\n                        <h4 id="maestro-${e.id}">${e.nombre}</h4>\n                        <p><strong>${e.especialidad}</strong> · ${e.anios} años exp.</p>\n                        <p>${e.resumen}</p>\n                        <div class="maestro-badges">\n                            <span class="maestro-badge">${e.anios}+ años</span>\n                            <span class="maestro-badge">${e.especialidad}</span>\n                        </div>\n                    </div>\n                    <div class="maestro-actions">\n                        <a class="btn-maestros-outline" href="./perfil.html?maestro=${e.id}">Ver perfil</a>\n                        <button class="btn-maestros-primary" data-contact="${e.id}">Contactar</button>\n                    </div>\n                </article>\n            `)).join(""),X&&(X.textContent=`${J.page} / ${t}`),Q&&(Q.disabled=J.page<=1),W&&(W.disabled=J.page>=t),r.setAttribute("aria-busy","false")}O&&O.addEventListener("input",(e=>{J.q=e.target.value,J.page=1,c()})),K&&K.addEventListener("change",(e=>{J.especialidad=e.target.value,J.page=1,c()})),U&&U.addEventListener("click",(()=>{O&&(O.value=""),K&&(K.value=""),J.q="",J.especialidad="",J.page=1,c()})),Q&&Q.addEventListener("click",(()=>{J.page>1&&(J.page--,c())})),W&&W.addEventListener("click",(()=>{J.page++,c()})),r.addEventListener("click",(e=>{const t=e.target.closest("[data-contact]");if(t){const e=Number(t.dataset.contact),o=G.find((t=>t.id===e));o&&alert(`Solicitud de contacto enviada a ${o.nombre}.`)}})),c()}}));